<section class="availability" ng-controller="MetricsAvailabilityController as vm">

  <h1>Availability</h1>

  <div class="panel panel-default summary">
    <div class="row">
      <div class="col-md-3 summary-item">
        <span class="data" ng-show="vm.uptimeRatio < 1">{{vm.uptimeRatio * 100 | number:3}} %</span>
        <span class="data" ng-show="vm.uptimeRatio === 1">{{vm.uptimeRatio * 100}} %</span>
        <span class="item">Availability</span>
      </div>
      <div class="col-md-3 summary-item">
        <span class="data">{{vm.downtimeDuration / 1000 | number:0}}s</span>
        <span class="item">Total Downtime Duration</span>
      </div>
      <div class="col-md-3 summary-item">
        <span class="data" ng-show="vm.lastDowntime.valueOf() !== 0">{{vm.lastDowntime | date:'mediumDate'}}</span>
        <span class="data" ng-show="!vm.lastDowntime || vm.lastDowntime.valueOf() === 0">Always Up</span>
        <span class="item">Last Downtime</span>
      </div>
      <div class="col-md-3 summary-item">
        <span class="data">{{vm.downtimeCount}}</span>
        <span class="item">Downtime Events</span>
      </div>
    </div>
  </div>

  <div class="panel panel-default graph">
    <div class="update pull-right" ng-show="vm.availabilityDataPoints.length > 0" >
      <i class="fa fa-clock-o"></i><a ng-click="vm.refreshAvailPageNow(vm.getRawMetricId())"><strong>Last update</strong> 20 seconds ago</a>
    </div>

    <h2>Avail points: {{vm.availabilityDataPoints.length}}</h2>
    <availability-chart
      data="{{vm.availabilityDataPoints}}"
      chart-type="availability"
      chart-height="250">
    </availability-chart>
  </div>

</section>
