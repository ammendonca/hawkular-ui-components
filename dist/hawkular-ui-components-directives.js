/// Copyright 2014-2015 Red Hat, Inc. and/or its affiliates
/// and other contributors as indicated by the @author tags.
///
/// Licensed under the Apache License, Version 2.0 (the "License");
/// you may not use this file except in compliance with the License.
/// You may obtain a copy of the License at
///
///   http://www.apache.org/licenses/LICENSE-2.0
///
/// Unless required by applicable law or agreed to in writing, software
/// distributed under the License is distributed on an "AS IS" BASIS,
/// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
/// See the License for the specific language governing permissions and
/// limitations under the License.
if (typeof HawkularComponentsVersions !== 'undefined') { HawkularComponentsVersions.push({name:'directives', version:'4a36992 Merge pull request #98 from jpkrohling/JPK-FixAccountSwitcher'})} else {HawkularComponentsVersions = [{name:'directives', version:'4a36992 Merge pull request #98 from jpkrohling/JPK-FixAccountSwitcher'}]};


var Sidebar;
(function (Sidebar) {
    Sidebar.pluginName = "sidebar";
    Sidebar.log = Logger.get(Sidebar.pluginName);
    Sidebar.templatePath = "plugins/sidebar/html/sidebar.html";
})(Sidebar || (Sidebar = {}));

var Sidebar;
(function (Sidebar) {
    Sidebar._module = angular.module(Sidebar.pluginName, ['duScroll']);
    Sidebar._module.directive('hawkularSidebar', function () {
        return new Sidebar.SidebarDirective();
    });
    hawtioPluginLoader.addModule(Sidebar.pluginName);
})(Sidebar || (Sidebar = {}));

var Sidebar;
(function (Sidebar) {
    var log = Logger.get("Sidebar");
    var SidebarDirective = (function () {
        function SidebarDirective() {
            this.restrict = 'E';
            this.transclude = false;
            this.replace = false;
            this.templateUrl = Sidebar.templatePath;
        }
        return SidebarDirective;
    })();
    Sidebar.SidebarDirective = SidebarDirective;
    Sidebar.SidebarController = Sidebar._module.controller("Sidebar.SidebarController", ['$scope', '$rootScope', '$location', function ($scope, $rootScope, $location) {
        $scope.isSinglePage = function () {
            return $location.path().indexOf('/metrics') !== 0;
        };
        $scope.getClass = function (path) {
            return $location.path().indexOf(path) === 0 ? 'active' : '';
        };
    }]);
})(Sidebar || (Sidebar = {}));

var Topbar;
(function (Topbar) {
    Topbar.pluginName = "topbar";
    Topbar.log = Logger.get(Topbar.pluginName);
    Topbar.templatePath = "plugins/topbar/html/topbar.html";
    Topbar.globalTenantId = "test";
    Topbar.globalEnvironmentId = "test";
})(Topbar || (Topbar = {}));

var Topbar;
(function (Topbar) {
    Topbar._module = angular.module(Topbar.pluginName, ['ngResource', 'hawkular.services', 'ui.bootstrap']);
    Topbar._module.directive('hawkularTopbar', function () {
        return new Topbar.TopbarDirective();
    });
    hawtioPluginLoader.addModule(Topbar.pluginName);
})(Topbar || (Topbar = {}));

var Topbar;
(function (Topbar) {
    var log = Logger.get("Topbar");
    var TopbarDirective = (function () {
        function TopbarDirective() {
            this.restrict = 'E';
            this.transclude = false;
            this.replace = false;
            this.templateUrl = Topbar.templatePath;
        }
        return TopbarDirective;
    })();
    Topbar.TopbarDirective = TopbarDirective;
    Topbar.TopbarController = Topbar._module.controller("Topbar.TopbarController", ['$scope', '$rootScope', '$location', '$route', '$routeParams', 'HawkularNav', 'HawkularInventory', function ($scope, $rootScope, $location, $route, $routeParams, HawkularNav, HawkularInventory) {
        $scope.rangeNames = {
            '3600000': 'Last Hour',
            '43200000': 'Last 12 Hours',
            '86400000': 'Last Day',
            '604800000': 'Last Week',
            '2592000000': 'Last Month',
            '31536000000': 'Last Year'
        };
        $scope.getFormattedDate = function () {
            var diff = $scope.hkParams.timeOffset;
            $scope.offsetName = $scope.rangeNames[$scope.hkParams.timeOffset] || 'Custom';
            var momStart = moment().subtract($scope.hkParams.timeOffset, 'milliseconds');
            var momEnd = moment();
            if (diff < 24 * 60 * 60 * 1000) {
                return momStart.format('D MMM YYYY') + ' ' + momStart.format('HH:mm') + ' - ' + (momStart.day() !== momEnd.day() ? momEnd.format('D MMM YYYY ') : '') + momEnd.format('HH:mm');
            }
            else {
                return momStart.format('D MMM YYYY') + ' - ' + momEnd.format('D MMM YYYY');
            }
        };
        $scope.setRange = function (range) {
            HawkularNav.setTimestamp(moment.duration(range).valueOf());
        };
        $scope.$watch(function () {
            return $location.path();
        }, function (value) {
            $rootScope.hideSidebar = ($location.path().indexOf('/metrics/add-url') === 0);
        });
        $scope.setSelection = function (resourceId) {
            $route.updateParams({ resourceId: resourceId.id });
        };
    }]);
})(Topbar || (Topbar = {}));

var Topbar;
(function (Topbar) {
    var HawkularNav = (function () {
        function HawkularNav($rootScope, $route, $routeParams, HawkularInventory) {
            this.$rootScope = $rootScope;
            this.$route = $route;
            this.$routeParams = $routeParams;
            this.HawkularInventory = HawkularInventory;
            $rootScope.hkParams = $routeParams || [];
            var defaultOffset = 1 * 60 * 60 * 1000;
            HawkularInventory.Resource.query({ tenantId: Topbar.globalTenantId, environmentId: Topbar.globalEnvironmentId }, function (resourceList) {
                $rootScope.hkResources = resourceList;
                for (var i = 0; i < resourceList.length; i++) {
                    if (resourceList[i].id === $rootScope.hkParams.resourceId) {
                        $rootScope.selectedResource = resourceList[i];
                    }
                }
            });
            $rootScope.hkParams.timeOffset = $routeParams.timeOffset || defaultOffset;
            $rootScope.hkEndTimestamp = $routeParams.endTimestamp || moment().valueOf();
            $rootScope.hkStartTimestamp = moment().subtract($rootScope.hkParams.timeOffset, 'milliseconds').valueOf();
            $rootScope.$on('$routeChangeSuccess', function (event, current, previous) {
                $rootScope.hkParams = current.params;
                $rootScope.hkParams.timeOffset = $routeParams.timeOffset || defaultOffset;
                $rootScope.hkEndTimestamp = $routeParams.endTimestamp || moment().valueOf();
                $rootScope.hkStartTimestamp = moment().subtract($rootScope.hkParams.timeOffset, 'milliseconds').valueOf();
                HawkularInventory.Resource.query({ tenantId: Topbar.globalTenantId, environmentId: Topbar.globalEnvironmentId }, function (resourceList) {
                    $rootScope.hkResources = resourceList;
                    for (var i = 0; i < resourceList.length; i++) {
                        if (resourceList[i].id === $rootScope.hkParams.resourceId) {
                            $rootScope.selectedResource = resourceList[i];
                        }
                    }
                });
            }, this);
        }
        HawkularNav.prototype.setTimestamp = function (offset, end) {
            this.$route.updateParams({ timeOffset: offset, endTime: end });
        };
        HawkularNav.$inject = ['$rootScope', '$route', '$routeParams', 'HawkularInventory'];
        return HawkularNav;
    })();
    Topbar.HawkularNav = HawkularNav;
    Topbar._module.service('HawkularNav', HawkularNav);
})(Topbar || (Topbar = {}));

angular.module("hawkular-ui-components-directives-templates", []).run(["$templateCache", function($templateCache) {$templateCache.put("plugins/sidebar/html/sidebar.html","<div class=\"col-sm-3 col-md-2 sidebar-pf sidebar-pf-left sidebar-pf-dark sidebar-pf-big-icons sidebar-pf-fixed\">\n  <nav>\n    <ul class=\"nav nav-pills nav-stacked nav-dark nav-big-icons\" ng-hide=\"isSinglePage()\">\n      <li ng-class=\"getClass(\'/metrics/availability\')\"><a ng-href=\"/metrics/availability/{{hkParams.resourceId}}/{{hkParams.timeOffset}}/{{hkEndTimestamp}}\"><i class=\"fa fa-arrow-up\"></i>Availability</a></li>\n      <li ng-class=\"getClass(\'/metrics/response-time\')\"><a ng-href=\"/metrics/response-time/{{hkParams.resourceId}}/{{hkParams.timeOffset}}/{{hkEndTimestamp}}\"><i class=\"fa fa-line-chart\"></i>Response Time</a></li>\n      <li ng-class=\"getClass(\'/metrics/alerts\')\"><a ng-href=\"/metrics/alerts/{{hkParams.resourceId}}/{{hkParams.timeOffset}}/{{hkEndTimestamp}}\"><i class=\"fa fa-flag\"></i>Alerts</a></li>\n    </ul>\n    <ul class=\"nav nav-pills nav-stacked nav-dark nav-big-icons\" du-spy-context  ng-show=\"isSinglePage()\">\n      <li du-scrollspy=\"secav\" offset=\"135\" class=\"active\"><a href=\"#secav\" du-smooth-scroll offset=\"135\"><i class=\"fa fa-arrow-up\"></i>Availability</a></li>\n      <li du-scrollspy=\"secrt\" offset=\"125\"><a href=\"#secrt\" du-smooth-scroll offset=\"125\"><i class=\"fa fa-line-chart\"></i>Response Time</a></li>\n      <li du-scrollspy=\"secal\" offset=\"125\"><a href=\"#secal\" du-smooth-scroll offset=\"125\"><i class=\"fa fa-flag\"></i>Alerts</a></li>\n    </ul>\n  </nav>\n</div>\n");
$templateCache.put("plugins/topbar/html/topbar.html","<ul class=\"nav navbar-nav navbar-primary navbar-selector navbar-dark row\">\n  <li class=\"col-sm-3 col-md-2\">\n    <a href=\"/metrics/add-url\">URLs List</a>\n  </li>\n  <li class=\"context dropdown\">\n    <a href=\"#\" class=\"additional-info\" dropdown-toggle ng-hide=\"resources.length === 0\">\n      {{selectedResource.properties.url}}\n      <b class=\"caret\"></b>\n    </a>\n    <ul class=\"dropdown-menu\" role=\"menu\">\n      <li ng-class=\"{\'active\': hkParams.resourceId === resource.id}\" ng-repeat=\"resource in hkResources | orderBy:\'properties.url\'\">\n        <a href=\"\" ng-click=\"setSelection(resource)\">{{resource.properties.url}}</a>\n      </li>\n      <li class=\"divider\"></li>\n      <li>\n        <a href=\"/metrics/add-url\">Add Application...</a>\n      </li>\n    </ul>\n  </li>\n  <li class=\"pull-right date-range dropdown\">\n    <i class=\"fa fa-calendar\"></i>\n    <div class=\"input\" dropdown-toggle>\n      {{offsetName}} <span class=\"additional-info\">({{getFormattedDate()}})</span>\n    </div>\n\n    <div class=\"dropdown-menu infotip bottom-right\">\n      <div class=\"arrow\"></div>\n      <div class=\"dropdown-menu-content\">\n        <span class=\"label\">Last</span>\n        <div class=\"btn-group\">\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last Hour\'}\" ng-click=\"setRange({hour: 1})\">1h</button>\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last 12 Hours\'}\" ng-click=\"setRange({hours: 12})\">12h</button>\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last Day\'}\" ng-click=\"setRange({day: 1})\">Day</button>\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last Week\'}\" ng-click=\"setRange({week: 1})\">Week</button>\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last Month\'}\" ng-click=\"setRange({month: 1})\">Month</button>\n          <button type=\"button\" class=\"btn btn-default\" ng-class=\"{\'active\': offsetName === \'Last Year\'}\" ng-click=\"setRange({year: 1})\">Year</button>\n        </div>\n      </div>\n    </div>\n  </li>\n</ul>\n");}]); hawtioPluginLoader.addModule("hawkular-ui-components-directives-templates");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpY2VuY2UudHh0IiwiZGlyZWN0aXZlc3ZlcnNpb24uanMiLCIvc291cmNlL2luY2x1ZGVzLmpzIiwiL3NpZGViYXIvdHMvc2lkZWJhckdsb2JhbHMudHMiLCIvc2lkZWJhci90cy9zaWRlYmFyUGx1Z2luLnRzIiwiL3NpZGViYXIvdHMvc2lkZWJhckRpcmVjdGl2ZS50cyIsIi90b3BiYXIvdHMvdG9wYmFyR2xvYmFscy50cyIsIi90b3BiYXIvdHMvdG9wYmFyUGx1Z2luLnRzIiwiL3RvcGJhci90cy90b3BiYXJEaXJlY3RpdmUudHMiLCIvdG9wYmFyL3RzL3RvcGJhclNlcnZpY2VzLnRzIiwidGVtcGxhdGVzLmpzIl0sIm5hbWVzIjpbIlNpZGViYXIiLCJTaWRlYmFyLlNpZGViYXJEaXJlY3RpdmUiLCJTaWRlYmFyLlNpZGViYXJEaXJlY3RpdmUuY29uc3RydWN0b3IiLCJUb3BiYXIiLCJUb3BiYXIuVG9wYmFyRGlyZWN0aXZlIiwiVG9wYmFyLlRvcGJhckRpcmVjdGl2ZS5jb25zdHJ1Y3RvciIsIlRvcGJhci5IYXdrdWxhck5hdiIsIlRvcGJhci5IYXdrdWxhck5hdi5jb25zdHJ1Y3RvciIsIlRvcGJhci5IYXdrdWxhck5hdi5zZXRUaW1lc3RhbXAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQ0FBO0FBQ0E7QUNlQSxJQUFPLE9BQU8sQ0FRYjtBQVJELFdBQU8sT0FBTyxFQUFDLENBQUM7SUFFSEEsa0JBQVVBLEdBQUdBLFNBQVNBLENBQUNBO0lBRXZCQSxXQUFHQSxHQUFrQkEsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0Esa0JBQVVBLENBQUNBLENBQUNBO0lBRTVDQSxvQkFBWUEsR0FBR0EsbUNBQW1DQSxDQUFDQTtBQUVoRUEsQ0FBQ0EsRUFSTSxPQUFPLEtBQVAsT0FBTyxRQVFiOztBQ05ELElBQU8sT0FBTyxDQVNiO0FBVEQsV0FBTyxPQUFPLEVBQUMsQ0FBQztJQUVIQSxlQUFPQSxHQUFHQSxPQUFPQSxDQUFDQSxNQUFNQSxDQUFDQSxrQkFBVUEsRUFBRUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFFOURBLGVBQU9BLENBQUNBLFNBQVNBLENBQUNBLGlCQUFpQkEsRUFBRUE7UUFDbkMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDeEMsQ0FBQyxDQUFDQSxDQUFDQTtJQUVIQSxrQkFBa0JBLENBQUNBLFNBQVNBLENBQUNBLGtCQUFVQSxDQUFDQSxDQUFDQTtBQUMzQ0EsQ0FBQ0EsRUFUTSxPQUFPLEtBQVAsT0FBTyxRQVNiOztBQ1hELElBQU8sT0FBTyxDQXdCYjtBQXhCRCxXQUFPLE9BQU8sRUFBQyxDQUFDO0lBRWRBLElBQUlBLEdBQUdBLEdBQWtCQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQTtJQUUvQ0EsSUFBYUEsZ0JBQWdCQTtRQUE3QkMsU0FBYUEsZ0JBQWdCQTtZQUVwQkMsYUFBUUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDZkEsZUFBVUEsR0FBR0EsS0FBS0EsQ0FBQ0E7WUFDbkJBLFlBQU9BLEdBQUdBLEtBQUtBLENBQUNBO1lBRWhCQSxnQkFBV0EsR0FBR0Esb0JBQVlBLENBQUNBO1FBQ3BDQSxDQUFDQTtRQUFERCx1QkFBQ0E7SUFBREEsQ0FQQUQsQUFPQ0MsSUFBQUQ7SUFQWUEsd0JBQWdCQSxHQUFoQkEsZ0JBT1pBLENBQUFBO0lBRVVBLHlCQUFpQkEsR0FBR0EsZUFBT0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsMkJBQTJCQSxFQUMzRUEsQ0FBQ0EsUUFBUUEsRUFBRUEsWUFBWUEsRUFBRUEsV0FBV0EsRUFBRUEsVUFBQ0EsTUFBTUEsRUFBRUEsVUFBVUEsRUFBRUEsU0FBU0E7UUFFbEVBLE1BQU1BLENBQUNBLFlBQVlBLEdBQUdBO1lBQ3BCLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUNBO1FBRUZBLE1BQU1BLENBQUNBLFFBQVFBLEdBQUdBLFVBQVVBLElBQUlBO1lBQzlCLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQzlELENBQUMsQ0FBQ0E7SUFDSkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7QUFDUkEsQ0FBQ0EsRUF4Qk0sT0FBTyxLQUFQLE9BQU8sUUF3QmI7O0FDeEJELElBQU8sTUFBTSxDQVlaO0FBWkQsV0FBTyxNQUFNLEVBQUMsQ0FBQztJQUVGRyxpQkFBVUEsR0FBR0EsUUFBUUEsQ0FBQ0E7SUFFdEJBLFVBQUdBLEdBQWtCQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxpQkFBVUEsQ0FBQ0EsQ0FBQ0E7SUFFNUNBLG1CQUFZQSxHQUFHQSxpQ0FBaUNBLENBQUNBO0lBRWpEQSxxQkFBY0EsR0FBR0EsTUFBTUEsQ0FBQ0E7SUFFeEJBLDBCQUFtQkEsR0FBR0EsTUFBTUEsQ0FBQ0E7QUFFMUNBLENBQUNBLEVBWk0sTUFBTSxLQUFOLE1BQU0sUUFZWjs7QUNWRCxJQUFPLE1BQU0sQ0FTWjtBQVRELFdBQU8sTUFBTSxFQUFDLENBQUM7SUFFRkEsY0FBT0EsR0FBR0EsT0FBT0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsaUJBQVVBLEVBQUVBLENBQUNBLFlBQVlBLEVBQUVBLG1CQUFtQkEsRUFBRUEsY0FBY0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFFckdBLGNBQU9BLENBQUNBLFNBQVNBLENBQUNBLGdCQUFnQkEsRUFBRUE7UUFDbEMsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3RDLENBQUMsQ0FBQ0EsQ0FBQ0E7SUFFSEEsa0JBQWtCQSxDQUFDQSxTQUFTQSxDQUFDQSxpQkFBVUEsQ0FBQ0EsQ0FBQ0E7QUFDM0NBLENBQUNBLEVBVE0sTUFBTSxLQUFOLE1BQU0sUUFTWjs7QUNYRCxJQUFPLE1BQU0sQ0EwRFo7QUExREQsV0FBTyxNQUFNLEVBQUMsQ0FBQztJQUViQSxJQUFJQSxHQUFHQSxHQUFrQkEsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7SUFFOUNBLElBQWFBLGVBQWVBO1FBQTVCQyxTQUFhQSxlQUFlQTtZQUVuQkMsYUFBUUEsR0FBR0EsR0FBR0EsQ0FBQ0E7WUFDZkEsZUFBVUEsR0FBR0EsS0FBS0EsQ0FBQ0E7WUFDbkJBLFlBQU9BLEdBQUdBLEtBQUtBLENBQUNBO1lBRWhCQSxnQkFBV0EsR0FBR0EsbUJBQVlBLENBQUNBO1FBQ3BDQSxDQUFDQTtRQUFERCxzQkFBQ0E7SUFBREEsQ0FQQUQsQUFPQ0MsSUFBQUQ7SUFQWUEsc0JBQWVBLEdBQWZBLGVBT1pBLENBQUFBO0lBRVVBLHVCQUFnQkEsR0FBR0EsY0FBT0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EseUJBQXlCQSxFQUN4RUEsQ0FBQ0EsUUFBUUEsRUFBRUEsWUFBWUEsRUFBRUEsV0FBV0EsRUFBRUEsUUFBUUEsRUFBRUEsY0FBY0EsRUFBRUEsYUFBYUEsRUFBRUEsbUJBQW1CQSxFQUFFQSxVQUFDQSxNQUFNQSxFQUFFQSxVQUFVQSxFQUFFQSxTQUFTQSxFQUFFQSxNQUFNQSxFQUFFQSxZQUFZQSxFQUFFQSxXQUFXQSxFQUFFQSxpQkFBaUJBO1FBRXRMQSxNQUFNQSxDQUFDQSxVQUFVQSxHQUFHQTtZQUNsQkEsU0FBU0EsRUFBRUEsV0FBV0E7WUFDdEJBLFVBQVVBLEVBQUVBLGVBQWVBO1lBQzNCQSxVQUFVQSxFQUFFQSxVQUFVQTtZQUN0QkEsV0FBV0EsRUFBRUEsV0FBV0E7WUFDeEJBLFlBQVlBLEVBQUVBLFlBQVlBO1lBQzFCQSxhQUFhQSxFQUFFQSxXQUFXQTtTQUMzQkEsQ0FBQ0E7UUFFRkEsTUFBTUEsQ0FBQ0EsZ0JBQWdCQSxHQUFHQTtZQUN4QixJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztZQUd0QyxNQUFNLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxRQUFRLENBQUM7WUFNOUUsSUFBSSxRQUFRLEdBQUcsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBQzdFLElBQUksTUFBTSxHQUFHLE1BQU0sRUFBRSxDQUFDO1lBRXRCLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUMvQixNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUksRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNsTCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDN0UsQ0FBQztRQUNILENBQUMsQ0FBQ0E7UUFFRkEsTUFBTUEsQ0FBQ0EsUUFBUUEsR0FBR0EsVUFBU0EsS0FBS0E7WUFDOUIsV0FBVyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDQTtRQUVGQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQTtZQUFhLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7UUFBQyxDQUFDLEVBQUVBLFVBQVNBLEtBQUtBO1lBQ25FLFVBQVUsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDaEYsQ0FBQyxDQUFDQSxDQUFDQTtRQUVIQSxNQUFNQSxDQUFDQSxZQUFZQSxHQUFHQSxVQUFTQSxVQUFVQTtZQUN2QyxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxFQUFFLEVBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQ0E7SUFFSkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7QUFDUkEsQ0FBQ0EsRUExRE0sTUFBTSxLQUFOLE1BQU0sUUEwRFo7O0FDeERELElBQU8sTUFBTSxDQW9EWjtBQXBERCxXQUFPLE1BQU0sRUFBQyxDQUFDO0lBRWJBLElBQWFBLFdBQVdBO1FBS3RCRyxTQUxXQSxXQUFXQSxDQUtGQSxVQUFlQSxFQUFVQSxNQUFXQSxFQUFVQSxZQUFpQkEsRUFBVUEsaUJBQXNCQTtZQUEvRkMsZUFBVUEsR0FBVkEsVUFBVUEsQ0FBS0E7WUFBVUEsV0FBTUEsR0FBTkEsTUFBTUEsQ0FBS0E7WUFBVUEsaUJBQVlBLEdBQVpBLFlBQVlBLENBQUtBO1lBQVVBLHNCQUFpQkEsR0FBakJBLGlCQUFpQkEsQ0FBS0E7WUFDakhBLFVBQVVBLENBQUNBLFFBQVFBLEdBQUdBLFlBQVlBLElBQUlBLEVBQUVBLENBQUNBO1lBR3pDQSxJQUFJQSxhQUFhQSxHQUFHQSxDQUFDQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFJQSxJQUFJQSxDQUFDQTtZQUV4Q0EsaUJBQWlCQSxDQUFDQSxRQUFRQSxDQUFDQSxLQUFLQSxDQUFDQSxFQUFDQSxRQUFRQSxFQUFFQSxxQkFBY0EsRUFBRUEsYUFBYUEsRUFBRUEsMEJBQW1CQSxFQUFDQSxFQUFFQSxVQUFDQSxZQUFZQTtnQkFDNUdBLFVBQVVBLENBQUNBLFdBQVdBLEdBQUdBLFlBQVlBLENBQUNBO2dCQUN0Q0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsR0FBR0EsWUFBWUEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0E7b0JBQzdDQSxFQUFFQSxDQUFBQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxLQUFLQSxVQUFVQSxDQUFDQSxRQUFRQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQTt3QkFDekRBLFVBQVVBLENBQUNBLGdCQUFnQkEsR0FBR0EsWUFBWUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQ2hEQSxDQUFDQTtnQkFDSEEsQ0FBQ0E7WUFDSEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFFSEEsVUFBVUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsVUFBVUEsR0FBR0EsWUFBWUEsQ0FBQ0EsVUFBVUEsSUFBSUEsYUFBYUEsQ0FBQ0E7WUFDMUVBLFVBQVVBLENBQUNBLGNBQWNBLEdBQUdBLFlBQVlBLENBQUNBLFlBQVlBLElBQUlBLE1BQU1BLEVBQUVBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1lBQzVFQSxVQUFVQSxDQUFDQSxnQkFBZ0JBLEdBQUlBLE1BQU1BLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLFVBQVVBLENBQUNBLFFBQVFBLENBQUNBLFVBQVVBLEVBQUVBLGNBQWNBLENBQUNBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1lBRTNHQSxVQUFVQSxDQUFDQSxHQUFHQSxDQUFDQSxxQkFBcUJBLEVBQUVBLFVBQVVBLEtBQUtBLEVBQUVBLE9BQU9BLEVBQUVBLFFBQVFBO2dCQUN0RSxVQUFVLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7Z0JBRXJDLFVBQVUsQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxVQUFVLElBQUksYUFBYSxDQUFDO2dCQUMxRSxVQUFVLENBQUMsY0FBYyxHQUFHLFlBQVksQ0FBQyxZQUFZLElBQUksTUFBTSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzVFLFVBQVUsQ0FBQyxnQkFBZ0IsR0FBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsY0FBYyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBRTNHLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBQyxRQUFRLEVBQUUscUJBQWMsRUFBRSxhQUFhLEVBQUUsMEJBQW1CLEVBQUMsRUFBRSxVQUFDLFlBQVk7b0JBQzVHLFVBQVUsQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDO29CQUN0QyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO3dCQUM3QyxFQUFFLENBQUEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLFVBQVUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzs0QkFDekQsVUFBVSxDQUFDLGdCQUFnQixHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDaEQsQ0FBQztvQkFDSCxDQUFDO2dCQUNILENBQUMsQ0FBQyxDQUFDO1lBRUwsQ0FBQyxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNYQSxDQUFDQTtRQUVNRCxrQ0FBWUEsR0FBbkJBLFVBQW9CQSxNQUFNQSxFQUFFQSxHQUFHQTtZQUM3QkUsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsRUFBQ0EsVUFBVUEsRUFBRUEsTUFBTUEsRUFBRUEsT0FBT0EsRUFBRUEsR0FBR0EsRUFBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDL0RBLENBQUNBO1FBM0NhRixtQkFBT0EsR0FBR0EsQ0FBQ0EsWUFBWUEsRUFBRUEsUUFBUUEsRUFBRUEsY0FBY0EsRUFBRUEsbUJBQW1CQSxDQUFDQSxDQUFDQTtRQTRDeEZBLGtCQUFDQTtJQUFEQSxDQTlDQUgsQUE4Q0NHLElBQUFIO0lBOUNZQSxrQkFBV0EsR0FBWEEsV0E4Q1pBLENBQUFBO0lBRURBLGNBQU9BLENBQUNBLE9BQU9BLENBQUNBLGFBQWFBLEVBQUVBLFdBQVdBLENBQUNBLENBQUNBO0FBRTlDQSxDQUFDQSxFQXBETSxNQUFNLEtBQU4sTUFBTSxRQW9EWjs7QUN0RUQ7QUFDQSIsImZpbGUiOiJoYXdrdWxhci11aS1jb21wb25lbnRzLWRpcmVjdGl2ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gQ29weXJpZ2h0IDIwMTQtMjAxNSBSZWQgSGF0LCBJbmMuIGFuZC9vciBpdHMgYWZmaWxpYXRlc1xuLy8vIGFuZCBvdGhlciBjb250cmlidXRvcnMgYXMgaW5kaWNhdGVkIGJ5IHRoZSBAYXV0aG9yIHRhZ3MuXG4vLy9cbi8vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vL1xuLy8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLy9cbi8vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4iLCJpZiAodHlwZW9mIEhhd2t1bGFyQ29tcG9uZW50c1ZlcnNpb25zICE9PSAndW5kZWZpbmVkJykgeyBIYXdrdWxhckNvbXBvbmVudHNWZXJzaW9ucy5wdXNoKHtuYW1lOidkaXJlY3RpdmVzJywgdmVyc2lvbjonNGEzNjk5MiBNZXJnZSBwdWxsIHJlcXVlc3QgIzk4IGZyb20ganBrcm9obGluZy9KUEstRml4QWNjb3VudFN3aXRjaGVyJ30pfSBlbHNlIHtIYXdrdWxhckNvbXBvbmVudHNWZXJzaW9ucyA9IFt7bmFtZTonZGlyZWN0aXZlcycsIHZlcnNpb246JzRhMzY5OTIgTWVyZ2UgcHVsbCByZXF1ZXN0ICM5OCBmcm9tIGpwa3JvaGxpbmcvSlBLLUZpeEFjY291bnRTd2l0Y2hlcid9XX07IixudWxsLCIvLy8gQ29weXJpZ2h0IDIwMTQtMjAxNSBSZWQgSGF0LCBJbmMuIGFuZC9vciBpdHMgYWZmaWxpYXRlc1xuLy8vIGFuZCBvdGhlciBjb250cmlidXRvcnMgYXMgaW5kaWNhdGVkIGJ5IHRoZSBAYXV0aG9yIHRhZ3MuXG4vLy9cbi8vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vL1xuLy8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLy9cbi8vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL2luY2x1ZGVzLnRzXCIvPlxubW9kdWxlIFNpZGViYXIge1xuXG4gIGV4cG9ydCB2YXIgcGx1Z2luTmFtZSA9IFwic2lkZWJhclwiO1xuXG4gIGV4cG9ydCB2YXIgbG9nOkxvZ2dpbmcuTG9nZ2VyID0gTG9nZ2VyLmdldChwbHVnaW5OYW1lKTtcblxuICBleHBvcnQgdmFyIHRlbXBsYXRlUGF0aCA9IFwicGx1Z2lucy9zaWRlYmFyL2h0bWwvc2lkZWJhci5odG1sXCI7XG5cbn1cbiIsIi8vLyBDb3B5cmlnaHQgMjAxNC0yMDE1IFJlZCBIYXQsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzXG4vLy8gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbi8vL1xuLy8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy8vXG4vLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vL1xuLy8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwic2lkZWJhckdsb2JhbHMudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwic2lkZWJhckRpcmVjdGl2ZS50c1wiLz5cbm1vZHVsZSBTaWRlYmFyIHtcblxuICBleHBvcnQgdmFyIF9tb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShwbHVnaW5OYW1lLCBbJ2R1U2Nyb2xsJ10pO1xuXG4gIF9tb2R1bGUuZGlyZWN0aXZlKCdoYXdrdWxhclNpZGViYXInLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTaWRlYmFyLlNpZGViYXJEaXJlY3RpdmUoKTtcbiAgfSk7XG5cbiAgaGF3dGlvUGx1Z2luTG9hZGVyLmFkZE1vZHVsZShwbHVnaW5OYW1lKTtcbn1cbiIsIi8vLyBDb3B5cmlnaHQgMjAxNC0yMDE1IFJlZCBIYXQsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzXG4vLy8gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbi8vL1xuLy8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy8vXG4vLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vL1xuLy8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwic2lkZWJhclBsdWdpbi50c1wiLz5cbm1vZHVsZSBTaWRlYmFyIHtcblxuICB2YXIgbG9nOkxvZ2dpbmcuTG9nZ2VyID0gTG9nZ2VyLmdldChcIlNpZGViYXJcIik7XG5cbiAgZXhwb3J0IGNsYXNzIFNpZGViYXJEaXJlY3RpdmUge1xuXG4gICAgcHVibGljIHJlc3RyaWN0ID0gJ0UnO1xuICAgIHB1YmxpYyB0cmFuc2NsdWRlID0gZmFsc2U7XG4gICAgcHVibGljIHJlcGxhY2UgPSBmYWxzZTtcblxuICAgIHB1YmxpYyB0ZW1wbGF0ZVVybCA9IHRlbXBsYXRlUGF0aDtcbiAgfVxuXG4gIGV4cG9ydCB2YXIgU2lkZWJhckNvbnRyb2xsZXIgPSBfbW9kdWxlLmNvbnRyb2xsZXIoXCJTaWRlYmFyLlNpZGViYXJDb250cm9sbGVyXCIsXG4gICAgWyckc2NvcGUnLCAnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pID0+IHtcblxuICAgICAgJHNjb3BlLmlzU2luZ2xlUGFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnBhdGgoKS5pbmRleE9mKCcvbWV0cmljcycpICE9PSAwO1xuICAgICAgfTtcblxuICAgICAgJHNjb3BlLmdldENsYXNzID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhdGlvbi5wYXRoKCkuaW5kZXhPZihwYXRoKSA9PT0gMCA/ICdhY3RpdmUnIDogJyc7XG4gICAgICB9O1xuICAgIH1dKTtcbn1cbiIsIi8vLyBDb3B5cmlnaHQgMjAxNC0yMDE1IFJlZCBIYXQsIEluYy4gYW5kL29yIGl0cyBhZmZpbGlhdGVzXG4vLy8gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbi8vL1xuLy8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy8vXG4vLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vL1xuLy8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vaW5jbHVkZXMudHNcIi8+XG5tb2R1bGUgVG9wYmFyIHtcblxuICBleHBvcnQgdmFyIHBsdWdpbk5hbWUgPSBcInRvcGJhclwiO1xuXG4gIGV4cG9ydCB2YXIgbG9nOkxvZ2dpbmcuTG9nZ2VyID0gTG9nZ2VyLmdldChwbHVnaW5OYW1lKTtcblxuICBleHBvcnQgdmFyIHRlbXBsYXRlUGF0aCA9IFwicGx1Z2lucy90b3BiYXIvaHRtbC90b3BiYXIuaHRtbFwiO1xuXG4gIGV4cG9ydCB2YXIgZ2xvYmFsVGVuYW50SWQgPSBcInRlc3RcIjtcblxuICBleHBvcnQgdmFyIGdsb2JhbEVudmlyb25tZW50SWQgPSBcInRlc3RcIjtcblxufVxuIiwiLy8vIENvcHlyaWdodCAyMDE0LTIwMTUgUmVkIEhhdCwgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXNcbi8vLyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIGFzIGluZGljYXRlZCBieSB0aGUgQGF1dGhvciB0YWdzLlxuLy8vXG4vLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vLy9cbi8vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy8vXG4vLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJ0b3BiYXJHbG9iYWxzLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInRvcGJhckRpcmVjdGl2ZS50c1wiLz5cbm1vZHVsZSBUb3BiYXIge1xuXG4gIGV4cG9ydCB2YXIgX21vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKHBsdWdpbk5hbWUsIFsnbmdSZXNvdXJjZScsICdoYXdrdWxhci5zZXJ2aWNlcycsICd1aS5ib290c3RyYXAnXSk7XG5cbiAgX21vZHVsZS5kaXJlY3RpdmUoJ2hhd2t1bGFyVG9wYmFyJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgVG9wYmFyLlRvcGJhckRpcmVjdGl2ZSgpO1xuICB9KTtcblxuICBoYXd0aW9QbHVnaW5Mb2FkZXIuYWRkTW9kdWxlKHBsdWdpbk5hbWUpO1xufVxuIiwiLy8vIENvcHlyaWdodCAyMDE0LTIwMTUgUmVkIEhhdCwgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXNcbi8vLyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIGFzIGluZGljYXRlZCBieSB0aGUgQGF1dGhvciB0YWdzLlxuLy8vXG4vLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vLy9cbi8vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy8vXG4vLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJ0b3BiYXJQbHVnaW4udHNcIi8+XG5tb2R1bGUgVG9wYmFyIHtcblxuICB2YXIgbG9nOkxvZ2dpbmcuTG9nZ2VyID0gTG9nZ2VyLmdldChcIlRvcGJhclwiKTtcblxuICBleHBvcnQgY2xhc3MgVG9wYmFyRGlyZWN0aXZlIHtcblxuICAgIHB1YmxpYyByZXN0cmljdCA9ICdFJztcbiAgICBwdWJsaWMgdHJhbnNjbHVkZSA9IGZhbHNlO1xuICAgIHB1YmxpYyByZXBsYWNlID0gZmFsc2U7XG5cbiAgICBwdWJsaWMgdGVtcGxhdGVVcmwgPSB0ZW1wbGF0ZVBhdGg7XG4gIH1cblxuICBleHBvcnQgdmFyIFRvcGJhckNvbnRyb2xsZXIgPSBfbW9kdWxlLmNvbnRyb2xsZXIoXCJUb3BiYXIuVG9wYmFyQ29udHJvbGxlclwiLFxuICAgIFsnJHNjb3BlJywgJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZScsICckcm91dGVQYXJhbXMnLCAnSGF3a3VsYXJOYXYnLCAnSGF3a3VsYXJJbnZlbnRvcnknLCAoJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRyb3V0ZSwgJHJvdXRlUGFyYW1zLCBIYXdrdWxhck5hdiwgSGF3a3VsYXJJbnZlbnRvcnkpID0+IHtcblxuICAgICAgJHNjb3BlLnJhbmdlTmFtZXMgPSB7XG4gICAgICAgICczNjAwMDAwJzogJ0xhc3QgSG91cicsXG4gICAgICAgICc0MzIwMDAwMCc6ICdMYXN0IDEyIEhvdXJzJyxcbiAgICAgICAgJzg2NDAwMDAwJzogJ0xhc3QgRGF5JyxcbiAgICAgICAgJzYwNDgwMDAwMCc6ICdMYXN0IFdlZWsnLFxuICAgICAgICAnMjU5MjAwMDAwMCc6ICdMYXN0IE1vbnRoJyxcbiAgICAgICAgJzMxNTM2MDAwMDAwJzogJ0xhc3QgWWVhcidcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS5nZXRGb3JtYXR0ZWREYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaWZmID0gJHNjb3BlLmhrUGFyYW1zLnRpbWVPZmZzZXQ7XG5cbiAgICAgICAgLy8gRklYTUU6IFVzZSBtb21lbnQgP1xuICAgICAgICAkc2NvcGUub2Zmc2V0TmFtZSA9ICRzY29wZS5yYW5nZU5hbWVzWyRzY29wZS5oa1BhcmFtcy50aW1lT2Zmc2V0XSB8fCAnQ3VzdG9tJztcblxuICAgICAgICAvLyBUT0RPOiBVc2UgdGhpcyBmb3IgY3VzdG9tXG4gICAgICAgIC8vIHZhciBtb21TdGFydCA9IG1vbWVudCgkc2NvcGUuaGtTdGFydFRpbWVzdGFtcCk7XG4gICAgICAgIC8vIHZhciBtb21FbmQgPSBtb21lbnQoJHNjb3BlLmhrRW5kVGltZXN0YW1wKTtcblxuICAgICAgICB2YXIgbW9tU3RhcnQgPSBtb21lbnQoKS5zdWJ0cmFjdCgkc2NvcGUuaGtQYXJhbXMudGltZU9mZnNldCwgJ21pbGxpc2Vjb25kcycpO1xuICAgICAgICB2YXIgbW9tRW5kID0gbW9tZW50KCk7XG5cbiAgICAgICAgaWYgKGRpZmYgPCAyNCAqIDYwICogNjAgKiAxMDAwKSB7XG4gICAgICAgICAgcmV0dXJuIG1vbVN0YXJ0LmZvcm1hdCgnRCBNTU0gWVlZWScpICsgJyAnICsgbW9tU3RhcnQuZm9ybWF0KCdISDptbScpICsgJyAtICcgKyAobW9tU3RhcnQuZGF5KCkgIT09IG1vbUVuZC5kYXkoKSA/IG1vbUVuZC5mb3JtYXQoJ0QgTU1NIFlZWVkgJykgIDogJycpICsgbW9tRW5kLmZvcm1hdCgnSEg6bW0nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbW9tU3RhcnQuZm9ybWF0KCdEIE1NTSBZWVlZJykgKyAnIC0gJyArIG1vbUVuZC5mb3JtYXQoJ0QgTU1NIFlZWVknKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnNldFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgSGF3a3VsYXJOYXYuc2V0VGltZXN0YW1wKG1vbWVudC5kdXJhdGlvbihyYW5nZSkudmFsdWVPZigpKTtcbiAgICAgIH07XG5cbiAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7IHJldHVybiAkbG9jYXRpb24ucGF0aCgpOyB9LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAkcm9vdFNjb3BlLmhpZGVTaWRlYmFyID0gKCRsb2NhdGlvbi5wYXRoKCkuaW5kZXhPZignL21ldHJpY3MvYWRkLXVybCcpID09PSAwKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2NvcGUuc2V0U2VsZWN0aW9uID0gZnVuY3Rpb24ocmVzb3VyY2VJZCkge1xuICAgICAgICAkcm91dGUudXBkYXRlUGFyYW1zKHtyZXNvdXJjZUlkOiByZXNvdXJjZUlkLmlkfSk7XG4gICAgICB9O1xuXG4gICAgfV0pO1xufVxuIiwiLy8vIENvcHlyaWdodCAyMDE0LTIwMTUgUmVkIEhhdCwgSW5jLiBhbmQvb3IgaXRzIGFmZmlsaWF0ZXNcbi8vLyBhbmQgb3RoZXIgY29udHJpYnV0b3JzIGFzIGluZGljYXRlZCBieSB0aGUgQGF1dGhvciB0YWdzLlxuLy8vXG4vLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vLy9cbi8vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy8vXG4vLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9pbmNsdWRlcy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJ0b3BiYXJHbG9iYWxzLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInRvcGJhclBsdWdpbi50c1wiLz5cbm1vZHVsZSBUb3BiYXIge1xuXG4gIGV4cG9ydCBjbGFzcyBIYXdrdWxhck5hdiB7XG5cbiAgICBwdWJsaWMgc3RhdGljICRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHJvdXRlJywgJyRyb3V0ZVBhcmFtcycsICdIYXdrdWxhckludmVudG9yeSddO1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRyb290U2NvcGU6IGFueSwgcHJpdmF0ZSAkcm91dGU6IGFueSwgcHJpdmF0ZSAkcm91dGVQYXJhbXM6IGFueSwgcHJpdmF0ZSBIYXdrdWxhckludmVudG9yeTogYW55KSB7XG4gICAgICAkcm9vdFNjb3BlLmhrUGFyYW1zID0gJHJvdXRlUGFyYW1zIHx8IFtdO1xuXG4gICAgICAvLyBkZWZhdWx0IHRpbWUgcGVyaW9kIHNldCB0byAyNCBob3Vyc1xuICAgICAgdmFyIGRlZmF1bHRPZmZzZXQgPSAxICogNjAgKiA2MCAgKiAxMDAwO1xuXG4gICAgICBIYXdrdWxhckludmVudG9yeS5SZXNvdXJjZS5xdWVyeSh7dGVuYW50SWQ6IGdsb2JhbFRlbmFudElkLCBlbnZpcm9ubWVudElkOiBnbG9iYWxFbnZpcm9ubWVudElkfSwgKHJlc291cmNlTGlzdCkgPT4ge1xuICAgICAgICAkcm9vdFNjb3BlLmhrUmVzb3VyY2VzID0gcmVzb3VyY2VMaXN0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc291cmNlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmKHJlc291cmNlTGlzdFtpXS5pZCA9PT0gJHJvb3RTY29wZS5oa1BhcmFtcy5yZXNvdXJjZUlkKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLnNlbGVjdGVkUmVzb3VyY2UgPSByZXNvdXJjZUxpc3RbaV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS5oa1BhcmFtcy50aW1lT2Zmc2V0ID0gJHJvdXRlUGFyYW1zLnRpbWVPZmZzZXQgfHwgZGVmYXVsdE9mZnNldDtcbiAgICAgICRyb290U2NvcGUuaGtFbmRUaW1lc3RhbXAgPSAkcm91dGVQYXJhbXMuZW5kVGltZXN0YW1wIHx8IG1vbWVudCgpLnZhbHVlT2YoKTtcbiAgICAgICRyb290U2NvcGUuaGtTdGFydFRpbWVzdGFtcCA9ICBtb21lbnQoKS5zdWJ0cmFjdCgkcm9vdFNjb3BlLmhrUGFyYW1zLnRpbWVPZmZzZXQsICdtaWxsaXNlY29uZHMnKS52YWx1ZU9mKCk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50LCBwcmV2aW91cykge1xuICAgICAgICAkcm9vdFNjb3BlLmhrUGFyYW1zID0gY3VycmVudC5wYXJhbXM7XG5cbiAgICAgICAgJHJvb3RTY29wZS5oa1BhcmFtcy50aW1lT2Zmc2V0ID0gJHJvdXRlUGFyYW1zLnRpbWVPZmZzZXQgfHwgZGVmYXVsdE9mZnNldDtcbiAgICAgICAgJHJvb3RTY29wZS5oa0VuZFRpbWVzdGFtcCA9ICRyb3V0ZVBhcmFtcy5lbmRUaW1lc3RhbXAgfHwgbW9tZW50KCkudmFsdWVPZigpO1xuICAgICAgICAkcm9vdFNjb3BlLmhrU3RhcnRUaW1lc3RhbXAgPSAgbW9tZW50KCkuc3VidHJhY3QoJHJvb3RTY29wZS5oa1BhcmFtcy50aW1lT2Zmc2V0LCAnbWlsbGlzZWNvbmRzJykudmFsdWVPZigpO1xuXG4gICAgICAgIEhhd2t1bGFySW52ZW50b3J5LlJlc291cmNlLnF1ZXJ5KHt0ZW5hbnRJZDogZ2xvYmFsVGVuYW50SWQsIGVudmlyb25tZW50SWQ6IGdsb2JhbEVudmlyb25tZW50SWR9LCAocmVzb3VyY2VMaXN0KSA9PiB7XG4gICAgICAgICAgJHJvb3RTY29wZS5oa1Jlc291cmNlcyA9IHJlc291cmNlTGlzdDtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc291cmNlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYocmVzb3VyY2VMaXN0W2ldLmlkID09PSAkcm9vdFNjb3BlLmhrUGFyYW1zLnJlc291cmNlSWQpIHtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS5zZWxlY3RlZFJlc291cmNlID0gcmVzb3VyY2VMaXN0W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRUaW1lc3RhbXAob2Zmc2V0LCBlbmQpIHtcbiAgICAgIHRoaXMuJHJvdXRlLnVwZGF0ZVBhcmFtcyh7dGltZU9mZnNldDogb2Zmc2V0LCBlbmRUaW1lOiBlbmR9KTtcbiAgICB9XG4gIH1cblxuICBfbW9kdWxlLnNlcnZpY2UoJ0hhd2t1bGFyTmF2JywgSGF3a3VsYXJOYXYpO1xuXG59XG4iLCJhbmd1bGFyLm1vZHVsZShcImhhd2t1bGFyLXVpLWNvbXBvbmVudHMtZGlyZWN0aXZlcy10ZW1wbGF0ZXNcIiwgW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkgeyR0ZW1wbGF0ZUNhY2hlLnB1dChcInBsdWdpbnMvc2lkZWJhci9odG1sL3NpZGViYXIuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwiY29sLXNtLTMgY29sLW1kLTIgc2lkZWJhci1wZiBzaWRlYmFyLXBmLWxlZnQgc2lkZWJhci1wZi1kYXJrIHNpZGViYXItcGYtYmlnLWljb25zIHNpZGViYXItcGYtZml4ZWRcXFwiPlxcbiAgPG5hdj5cXG4gICAgPHVsIGNsYXNzPVxcXCJuYXYgbmF2LXBpbGxzIG5hdi1zdGFja2VkIG5hdi1kYXJrIG5hdi1iaWctaWNvbnNcXFwiIG5nLWhpZGU9XFxcImlzU2luZ2xlUGFnZSgpXFxcIj5cXG4gICAgICA8bGkgbmctY2xhc3M9XFxcImdldENsYXNzKFxcJy9tZXRyaWNzL2F2YWlsYWJpbGl0eVxcJylcXFwiPjxhIG5nLWhyZWY9XFxcIi9tZXRyaWNzL2F2YWlsYWJpbGl0eS97e2hrUGFyYW1zLnJlc291cmNlSWR9fS97e2hrUGFyYW1zLnRpbWVPZmZzZXR9fS97e2hrRW5kVGltZXN0YW1wfX1cXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1hcnJvdy11cFxcXCI+PC9pPkF2YWlsYWJpbGl0eTwvYT48L2xpPlxcbiAgICAgIDxsaSBuZy1jbGFzcz1cXFwiZ2V0Q2xhc3MoXFwnL21ldHJpY3MvcmVzcG9uc2UtdGltZVxcJylcXFwiPjxhIG5nLWhyZWY9XFxcIi9tZXRyaWNzL3Jlc3BvbnNlLXRpbWUve3toa1BhcmFtcy5yZXNvdXJjZUlkfX0ve3toa1BhcmFtcy50aW1lT2Zmc2V0fX0ve3toa0VuZFRpbWVzdGFtcH19XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtbGluZS1jaGFydFxcXCI+PC9pPlJlc3BvbnNlIFRpbWU8L2E+PC9saT5cXG4gICAgICA8bGkgbmctY2xhc3M9XFxcImdldENsYXNzKFxcJy9tZXRyaWNzL2FsZXJ0c1xcJylcXFwiPjxhIG5nLWhyZWY9XFxcIi9tZXRyaWNzL2FsZXJ0cy97e2hrUGFyYW1zLnJlc291cmNlSWR9fS97e2hrUGFyYW1zLnRpbWVPZmZzZXR9fS97e2hrRW5kVGltZXN0YW1wfX1cXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mbGFnXFxcIj48L2k+QWxlcnRzPC9hPjwvbGk+XFxuICAgIDwvdWw+XFxuICAgIDx1bCBjbGFzcz1cXFwibmF2IG5hdi1waWxscyBuYXYtc3RhY2tlZCBuYXYtZGFyayBuYXYtYmlnLWljb25zXFxcIiBkdS1zcHktY29udGV4dCAgbmctc2hvdz1cXFwiaXNTaW5nbGVQYWdlKClcXFwiPlxcbiAgICAgIDxsaSBkdS1zY3JvbGxzcHk9XFxcInNlY2F2XFxcIiBvZmZzZXQ9XFxcIjEzNVxcXCIgY2xhc3M9XFxcImFjdGl2ZVxcXCI+PGEgaHJlZj1cXFwiI3NlY2F2XFxcIiBkdS1zbW9vdGgtc2Nyb2xsIG9mZnNldD1cXFwiMTM1XFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtYXJyb3ctdXBcXFwiPjwvaT5BdmFpbGFiaWxpdHk8L2E+PC9saT5cXG4gICAgICA8bGkgZHUtc2Nyb2xsc3B5PVxcXCJzZWNydFxcXCIgb2Zmc2V0PVxcXCIxMjVcXFwiPjxhIGhyZWY9XFxcIiNzZWNydFxcXCIgZHUtc21vb3RoLXNjcm9sbCBvZmZzZXQ9XFxcIjEyNVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLWxpbmUtY2hhcnRcXFwiPjwvaT5SZXNwb25zZSBUaW1lPC9hPjwvbGk+XFxuICAgICAgPGxpIGR1LXNjcm9sbHNweT1cXFwic2VjYWxcXFwiIG9mZnNldD1cXFwiMTI1XFxcIj48YSBocmVmPVxcXCIjc2VjYWxcXFwiIGR1LXNtb290aC1zY3JvbGwgb2Zmc2V0PVxcXCIxMjVcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1mbGFnXFxcIj48L2k+QWxlcnRzPC9hPjwvbGk+XFxuICAgIDwvdWw+XFxuICA8L25hdj5cXG48L2Rpdj5cXG5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJwbHVnaW5zL3RvcGJhci9odG1sL3RvcGJhci5odG1sXCIsXCI8dWwgY2xhc3M9XFxcIm5hdiBuYXZiYXItbmF2IG5hdmJhci1wcmltYXJ5IG5hdmJhci1zZWxlY3RvciBuYXZiYXItZGFyayByb3dcXFwiPlxcbiAgPGxpIGNsYXNzPVxcXCJjb2wtc20tMyBjb2wtbWQtMlxcXCI+XFxuICAgIDxhIGhyZWY9XFxcIi9tZXRyaWNzL2FkZC11cmxcXFwiPlVSTHMgTGlzdDwvYT5cXG4gIDwvbGk+XFxuICA8bGkgY2xhc3M9XFxcImNvbnRleHQgZHJvcGRvd25cXFwiPlxcbiAgICA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiYWRkaXRpb25hbC1pbmZvXFxcIiBkcm9wZG93bi10b2dnbGUgbmctaGlkZT1cXFwicmVzb3VyY2VzLmxlbmd0aCA9PT0gMFxcXCI+XFxuICAgICAge3tzZWxlY3RlZFJlc291cmNlLnByb3BlcnRpZXMudXJsfX1cXG4gICAgICA8YiBjbGFzcz1cXFwiY2FyZXRcXFwiPjwvYj5cXG4gICAgPC9hPlxcbiAgICA8dWwgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnVcXFwiIHJvbGU9XFxcIm1lbnVcXFwiPlxcbiAgICAgIDxsaSBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogaGtQYXJhbXMucmVzb3VyY2VJZCA9PT0gcmVzb3VyY2UuaWR9XFxcIiBuZy1yZXBlYXQ9XFxcInJlc291cmNlIGluIGhrUmVzb3VyY2VzIHwgb3JkZXJCeTpcXCdwcm9wZXJ0aWVzLnVybFxcJ1xcXCI+XFxuICAgICAgICA8YSBocmVmPVxcXCJcXFwiIG5nLWNsaWNrPVxcXCJzZXRTZWxlY3Rpb24ocmVzb3VyY2UpXFxcIj57e3Jlc291cmNlLnByb3BlcnRpZXMudXJsfX08L2E+XFxuICAgICAgPC9saT5cXG4gICAgICA8bGkgY2xhc3M9XFxcImRpdmlkZXJcXFwiPjwvbGk+XFxuICAgICAgPGxpPlxcbiAgICAgICAgPGEgaHJlZj1cXFwiL21ldHJpY3MvYWRkLXVybFxcXCI+QWRkIEFwcGxpY2F0aW9uLi4uPC9hPlxcbiAgICAgIDwvbGk+XFxuICAgIDwvdWw+XFxuICA8L2xpPlxcbiAgPGxpIGNsYXNzPVxcXCJwdWxsLXJpZ2h0IGRhdGUtcmFuZ2UgZHJvcGRvd25cXFwiPlxcbiAgICA8aSBjbGFzcz1cXFwiZmEgZmEtY2FsZW5kYXJcXFwiPjwvaT5cXG4gICAgPGRpdiBjbGFzcz1cXFwiaW5wdXRcXFwiIGRyb3Bkb3duLXRvZ2dsZT5cXG4gICAgICB7e29mZnNldE5hbWV9fSA8c3BhbiBjbGFzcz1cXFwiYWRkaXRpb25hbC1pbmZvXFxcIj4oe3tnZXRGb3JtYXR0ZWREYXRlKCl9fSk8L3NwYW4+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJkcm9wZG93bi1tZW51IGluZm90aXAgYm90dG9tLXJpZ2h0XFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvd1xcXCI+PC9kaXY+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiZHJvcGRvd24tbWVudS1jb250ZW50XFxcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVxcXCJsYWJlbFxcXCI+TGFzdDwvc3Bhbj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImJ0bi1ncm91cFxcXCI+XFxuICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogb2Zmc2V0TmFtZSA9PT0gXFwnTGFzdCBIb3VyXFwnfVxcXCIgbmctY2xpY2s9XFxcInNldFJhbmdlKHtob3VyOiAxfSlcXFwiPjFoPC9idXR0b24+XFxuICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogb2Zmc2V0TmFtZSA9PT0gXFwnTGFzdCAxMiBIb3Vyc1xcJ31cXFwiIG5nLWNsaWNrPVxcXCJzZXRSYW5nZSh7aG91cnM6IDEyfSlcXFwiPjEyaDwvYnV0dG9uPlxcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IG9mZnNldE5hbWUgPT09IFxcJ0xhc3QgRGF5XFwnfVxcXCIgbmctY2xpY2s9XFxcInNldFJhbmdlKHtkYXk6IDF9KVxcXCI+RGF5PC9idXR0b24+XFxuICAgICAgICAgIDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGFzcz1cXFwie1xcJ2FjdGl2ZVxcJzogb2Zmc2V0TmFtZSA9PT0gXFwnTGFzdCBXZWVrXFwnfVxcXCIgbmctY2xpY2s9XFxcInNldFJhbmdlKHt3ZWVrOiAxfSlcXFwiPldlZWs8L2J1dHRvbj5cXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHRcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnYWN0aXZlXFwnOiBvZmZzZXROYW1lID09PSBcXCdMYXN0IE1vbnRoXFwnfVxcXCIgbmctY2xpY2s9XFxcInNldFJhbmdlKHttb250aDogMX0pXFxcIj5Nb250aDwvYnV0dG9uPlxcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xhc3M9XFxcIntcXCdhY3RpdmVcXCc6IG9mZnNldE5hbWUgPT09IFxcJ0xhc3QgWWVhclxcJ31cXFwiIG5nLWNsaWNrPVxcXCJzZXRSYW5nZSh7eWVhcjogMX0pXFxcIj5ZZWFyPC9idXR0b24+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICA8L2xpPlxcbjwvdWw+XFxuXCIpO31dKTsgaGF3dGlvUGx1Z2luTG9hZGVyLmFkZE1vZHVsZShcImhhd2t1bGFyLXVpLWNvbXBvbmVudHMtZGlyZWN0aXZlcy10ZW1wbGF0ZXNcIik7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9